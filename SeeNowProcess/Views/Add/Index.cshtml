@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    ViewBag.Title = "Index";
}
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - SeeNowProcess</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    <link rel="stylesheet" type="text/css" href="~/Content/leftmenu.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="~/Scripts/angularAdd.js"></script>
</head>
<!--Anna-->
<body>
    <!--przesuwa wszystko niewiadomo czemu-->
    <form ng-app="taskForm" name="taskForm" ng-controller="taskCtrl" class="form-horizontal" method="post">
        <div>{{message}}</div>
        <div class="form-group row">
            <label class="col-sm-2 control-label" for="title"> TITLE: </label>
            <input  name="taskTitle" class="form-control" type="text" id="task_title" ng-model="title" required ng-minlength="3" ng-maxlength="60">
            <span style="color: red" ng-show="submitted && taskForm.taskTitle.$valid">Title is required</span>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 control-label" for="description"> DESCRIPTION: </label>
            <textarea class="form-control" rows="5" id="task_description" ng-model="description" required> </textarea>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 control-label" for="status"> STATUS: </label>
            <select class="form-control" name="task_status" ng-model="status" ng-options="x.description for x in status_options"></select>
        </div>
        <div class="form-group row">
            <label class="control-label col-sm-2" for="importance"> IMPORTANCE: </label>
            <select class="form-control" name="task_importance" ng-model="importance" ng-options="x.description for x in importance_options"></select>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 control-label" for="estimated_time"> ESTIMATED TIME: </label>
            <input class="form-control" type="text" id="task_estimated_time" ng-model="estimated_time" required>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 control-label selectContainer" for="task_project"> PROJECT: </label>
            <select class="form-control" name="task_project" ng-model="project" ng-options="x.value for x in project_options" ng-change="getUserStories(project.id)"></select>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 control-label selectContainer" for="task_parent"> PARENT USER STORY: </label>
            <select class="form-control" name="task_parent" ng-model="parent" ng-options="x.value for x in parent_options" ng-change="getTeamsForProject(parent.id)"></select>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 control-label selectContainer" for="task_team"> TEAM: </label>
            <select class="form-control" name="task_team" ng-model="team" ng-options="x.NAME for x in team_options" ng-change="getUsersForProject(team.id)"></select>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 control-label" for="selected_users"> USERS: </label>
            <div class="col-sm-offset-2" name="selected" ng-repeat="x in users">
                <input class="col-sm-offset-2" type ="checkbox" ng-model="selected" ng-change="checkUser(x.id)"> {{x.NAME}}
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-10 control-label"></label>
            <input type="submit" class="btn green_button" style="margin-left: 20%" value="ADD TASK" ng-click="addTask()"><!--ADD TASK</input>-->
        </div>

        <div>
            {{selected_users.length}}
        </div>
    </form>
</body>
